excludes:
{{ template "portage_excludes" }}
- ^/run
- ^/etc/openldap/ssl/ldap.*
- ^/etc/sasl2/sasldb2
env:
{{ template "portage_env" . }}
prelude:
- cp -rf package.use /etc/portage/
- cp -rf package.mask /etc/portage/
- cp -rf package.env /etc/portage/
- cp -rf package.license /etc/portage/
- cp -rf patches /etc/portage/
- USE="inspector profiler rustfmt" emerge -1 dev-lang/rust virtual/rust
{{ template "portage_prelude_build_gentoo_binary" . }}
steps:
# 2024-02-21: new stable curl has a flag to control psl
# Next cycle we better make sure we have net-libs/libpsl in layers/system-x
- emerge -1 net-misc/curl 
{{ template "portage_build_gentoo_binary" . }}
requires:
- category: "layers"
  name: "system-x"
  version: ">=0"
